language: cpp
compiler: gcc
before_script:
  - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
  - sudo apt-get update -qq
  - sudo apt-get install -qq g++-4.8 libboost-all-dev libboost-dbg automake autoconf-archive gnulib libcppunit-dev freeglut3 libxmlrpc-c3-dev valgrind
  - export CXX='g++-4.8' CC='gcc-4.8'
  - sudo ./tools/setup-ubigraph.sh
script:
  - aclocal
  - automake --gnu --add-missing
  - autoconf
  - ./configure
  - make check
  - make
  - valgrind --error-exitcode=1 --leak-check=full -v ./src/pcp-vns -n cnd -d 4 < ./tests/instance.pcp
notifications:
  email:
    recipients:
      - lorenz.leutgeb@gmail.com
    on_success: never
    on_failure: change
